## Техническое задание на проект: «CameraPriceMonitor»

**1. Цель проекта**  
Создание веб-сервиса для мониторинга цен на подержанные фотоаппараты. Система помогает покупателям и продавцам определять рыночную стоимость конкретной модели, находить выгодные предложения и отслеживать динамику цен на основе данных из внешних источников и внутренней аналитики.

**2. Роли пользователей** 
Гость: просмотр каталога моделей камер, списка найденных предложений и базовой аналитики (средняя/медианная цена, min/max) по выбранной модели.  
Зарегистрированный пользователь: ведение личного списка отслеживания моделей, установка «целевой цены», добавление предложений в избранное, получение внутренних уведомлений (сигналов) о появлении выгодных лотов.  
Администратор: управление справочниками (бренды/модели), модерация (при необходимости), контроль качества данных, запуск обновления данных и пересчёта статистики, управление пользователями через админ-панель.

**3. Модели данных (сущности)** 
Brand (Бренд): справочник производителей фотоаппаратов.  
Поля: name, slug.

CameraModel (Модель камеры): карточка конкретной модели камеры, к которой привязываются объявления и аналитика.  
Поля: brand (связь ForeignKey), name, release_year (опц.), mount (опц.), sensor_type (опц.).

Listing (Объявление): конкретное предложение о продаже с внешней площадки.  
Поля: camera_model (связь ForeignKey), source (Avito/Youla/другое), external_id (опц.), title, url, price, currency, condition (выбор), region, seller_type (опц.), posted_at (опц.), fetched_at.

PriceSnapshot (История/срезы цены): записи об изменении цены объявления во времени для построения графиков динамики.  
Поля: listing (связь ForeignKey), price, currency, checked_at.

WatchItem (Отслеживание): персональные настройки мониторинга для пользователя.  
Поля: user (связь ForeignKey), camera_model (связь ForeignKey), target_price, preferred_condition (опц.), region (опц.), created_at, is_active.

**4. Ключевой функционал (User Stories)**  
 - Каталог и поиск: пользователь просматривает каталог моделей (по брендам), ищет модель по названию, переходит на страницу модели и видит предложения по ней.  
 - Фильтрация и сортировка: пользователь сортирует объявления по цене/дате обновления, фильтрует по региону и состоянию (если данные доступны).  
 - Визуализация: на странице модели отображается график динамики цен за период и сводные метрики (средняя, медиана, min/max), рассчитанные по базе объявлений/срезов.  
 - Оценка выгодности: система помечает объявления как «выгодные», если цена ниже медианы/средней по модели на заданный процент (например, 10–15%), и показывает это в интерфейсе.  
 - Мониторинг: зарегистрированный пользователь добавляет модель в список отслеживания, задаёт «целевую цену» и видит уведомление в личном кабинете, если появляется предложение дешевле порога.  
 - Обновление данных: система обновляет данные по объявлениям (через отдельную команду/скрипт) и пересчитывает агрегаты/графики для моделей.

**5. Внешние интеграции и аналитика**
 - Интеграция: планируется получение данных об объявлениях с Avito и Youla. Базовый сценарий - загрузка/обновление списка объявлений и фиксация цен (с сохранением ссылки, цены, региона, состояния при наличии).   
 - Аналитика: использование Pandas для расчёта показателей (Avg/Median/Min/Max, распределение по состоянию/региону при наличии) и Matplotlib/Plotly для построения графиков динамики и распределений цен, которые выводятся на страницах модели.

